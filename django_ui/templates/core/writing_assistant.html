{% extends "core/base.html" %} {% block title %}Writing Assistant - Research
Assistant{% endblock %} {% block content %}
<div class="container-fluid mt-4">
  <div class="row">
    <!-- Writing Form -->
    <div class="col-lg-6">
      <div class="card shadow-sm">
        <div class="card-header bg-success text-white">
          <h5 class="card-title mb-0">
            <i class="fas fa-pen-fancy me-2"></i>AI Writing Assistant
          </h5>
        </div>
        <div class="card-body">
          <form method="post">
            {% csrf_token %}

            <div class="mb-3">
              <label for="title" class="form-label">Document Title</label>
              <input
                type="text"
                class="form-control"
                id="title"
                name="title"
                placeholder="e.g., Literature Review on Machine Learning"
                required
              />
            </div>

            <div class="row mb-3">
              <div class="col-md-6">
                <label for="task_type" class="form-label">Task Type</label>
                <select
                  class="form-select"
                  id="task_type"
                  name="task_type"
                  required
                >
                  {% for value, label in task_types %}
                  <option value="{{ value }}">{{ label }}</option>
                  {% endfor %}
                </select>
              </div>
              <div class="col-md-6">
                <label for="tone" class="form-label">Writing Tone</label>
                <select class="form-select" id="tone" name="tone" required>
                  {% for value, label in tones %}
                  <option value="{{ value }}">{{ label }}</option>
                  {% endfor %}
                </select>
              </div>
            </div>

            <div class="mb-3">
              <label for="content" class="form-label">Your Content</label>
              <textarea
                class="form-control"
                id="content"
                name="content"
                rows="10"
                placeholder="Paste your draft text here for AI-powered improvements..."
                required
              ></textarea>
              <div class="form-text">
                Provide your draft content and the AI will help improve clarity,
                structure, and academic tone.
              </div>
            </div>

            <button type="submit" class="btn btn-success w-100">
              <i class="fas fa-magic me-2"></i>Improve My Writing
            </button>
          </form>
        </div>
      </div>

      <!-- Writing Tips -->
      <div class="card shadow-sm mt-3">
        <div class="card-header">
          <h6 class="card-title mb-0">
            <i class="fas fa-lightbulb me-2"></i>Writing Tips
          </h6>
        </div>
        <div class="card-body">
          <ul class="list-unstyled mb-0">
            <li class="mb-2">
              <i class="fas fa-check text-success me-2"></i>Use clear, concise
              sentences
            </li>
            <li class="mb-2">
              <i class="fas fa-check text-success me-2"></i>Maintain consistent
              terminology
            </li>
            <li class="mb-2">
              <i class="fas fa-check text-success me-2"></i>Structure arguments
              logically
            </li>
            <li class="mb-0">
              <i class="fas fa-check text-success me-2"></i>Support claims with
              evidence
            </li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Session History -->
    <div class="col-lg-6">
      <div class="card shadow-sm">
        <div
          class="card-header d-flex justify-content-between align-items-center"
        >
          <h5 class="card-title mb-0">Writing Sessions</h5>
          <span class="badge bg-primary"
            >{{ sessions.paginator.count }} total</span
          >
        </div>
        <div class="card-body">
          {% if sessions %} {% for session in sessions %}
          <div class="border rounded p-3 mb-3">
            <div class="d-flex justify-content-between align-items-start mb-2">
              <h6 class="mb-1">{{ session.title }}</h6>
              <small class="text-muted"
                >{{ session.created_at|date:"M d, Y" }}</small
              >
            </div>

            <div class="row mb-2">
              <div class="col-6">
                <small class="text-muted">
                  <i class="fas fa-tasks me-1"></i>{{
                  session.get_task_type_display }}
                </small>
              </div>
              <div class="col-6">
                <small class="text-muted">
                  <i class="fas fa-palette me-1"></i>{{ session.get_tone_display
                  }}
                </small>
              </div>
            </div>

            {% if session.readability_score %}
            <div class="progress mb-2" style="height: 8px">
              <div
                class="progress-bar bg-success"
                role="progressbar"
                style="width: {{ session.readability_score }}%"
                aria-valuenow="{{ session.readability_score }}"
                aria-valuemin="0"
                aria-valuemax="100"
              ></div>
            </div>
            <small class="text-muted">
              <i class="fas fa-chart-line me-1"></i>Readability: {{
              session.readability_score|floatformat:1 }}%
            </small>
            {% endif %} {% if session.word_count %}
            <div class="mt-2">
              <small class="text-muted">
                <i class="fas fa-file-word me-1"></i>{{ session.word_count }}
                words
              </small>
            </div>
            {% endif %}

            <div class="mt-2">
              <button
                class="btn btn-sm btn-outline-primary"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#session-{{ session.id }}"
                aria-expanded="false"
              >
                <i class="fas fa-eye me-1"></i>View Details
              </button>
            </div>

            <div class="collapse mt-3" id="session-{{ session.id }}">
              <div class="bg-light p-3 rounded">
                <h6>Original Content:</h6>
                <p class="small text-muted mb-3">
                  {{ session.content|truncatewords:50 }}
                </p>

                {% if session.improved_content %}
                <h6>Improved Content:</h6>
                <p class="small mb-3">
                  {{ session.improved_content|truncatewords:50 }}
                </p>
                {% endif %} {% if session.suggestions %}
                <h6>Suggestions:</h6>
                <ul class="small mb-0">
                  {% for suggestion in session.suggestions|slice:":3" %}
                  <li>{{ suggestion }}</li>
                  {% endfor %}
                </ul>
                {% endif %}
              </div>
            </div>
          </div>
          {% endfor %}

          <!-- Pagination -->
          {% if sessions.has_other_pages %}
          <nav aria-label="Writing sessions pagination">
            <ul class="pagination pagination-sm justify-content-center">
              {% if sessions.has_previous %}
              <li class="page-item">
                <a
                  class="page-link"
                  href="?page={{ sessions.previous_page_number }}"
                >
                  <i class="fas fa-chevron-left"></i>
                </a>
              </li>
              {% endif %}

              <li class="page-item active">
                <span class="page-link">{{ sessions.number }}</span>
              </li>

              {% if sessions.has_next %}
              <li class="page-item">
                <a
                  class="page-link"
                  href="?page={{ sessions.next_page_number }}"
                >
                  <i class="fas fa-chevron-right"></i>
                </a>
              </li>
              {% endif %}
            </ul>
          </nav>
          {% endif %} {% else %}
          <div class="text-center py-5">
            <i class="fas fa-pen-fancy fa-3x text-muted mb-3"></i>
            <h5 class="text-muted">No writing sessions yet</h5>
            <p class="text-muted">
              Start your first writing session using the form on the left.
            </p>
          </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Features Overview -->
<div class="row mt-4">
  <div class="col-12">
    <div class="card shadow-sm">
      <div class="card-body">
        <h5 class="card-title">AI Writing Assistant Features</h5>
        <div class="row">
          <div class="col-md-3 text-center">
            <i class="fas fa-spell-check fa-2x text-primary mb-2"></i>
            <h6>Grammar & Style</h6>
            <p class="small text-muted">Improve grammar, style, and clarity</p>
          </div>
          <div class="col-md-3 text-center">
            <i class="fas fa-chart-line fa-2x text-success mb-2"></i>
            <h6>Readability</h6>
            <p class="small text-muted">Enhance readability and flow</p>
          </div>
          <div class="col-md-3 text-center">
            <i class="fas fa-graduation-cap fa-2x text-info mb-2"></i>
            <h6>Academic Tone</h6>
            <p class="small text-muted">Maintain professional academic style</p>
          </div>
          <div class="col-md-3 text-center">
            <i class="fas fa-structure fa-2x text-warning mb-2"></i>
            <h6>Structure</h6>
            <p class="small text-muted">Organize content logically</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
